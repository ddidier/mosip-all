# v1.3.2

**Release Name:** API Test Commons Releases&#x20;

**Release version:** v1.3.2

**Release Date:** 27th March, 2025

### Overview&#x20;

The v1.3.2 release of API Test Commons introduces new developments, enhancements, security fixes, and bug resolutions to improve the efficiency, usability, and security of the MOSIP Functional Tests. This update includes significant improvements in YAML loading, test efficiency, report generation, and dependency management. Additionally, it introduces new methods for eKYC data decryption and Inji Verify backend services support.&#x20;

## Major Highlights&#x20;

#### New Development&#x20;

* Support for Inji Verify Api Testrig&#x20;
* Introduced supporting methods for Inji Verify, a new api testrig designed to test the Inji Verify backend services.&#x20;
* These methods have been integrated into API Test Commons.&#x20;
* New Method for eKYC Data Decryption for DSL&#x20;
* Implemented ekycDataDecryption, a method that decrypts eKYC data using AES-GCM encryption.&#x20;
* Extracts encrypted identity and session key from the provided JSON object.&#x20;
* Retrieves the corresponding private key for the given partner and decrypts the session key.&#x20;
* Uses the decrypted session key to decrypt the eKYC data and return a plain-text result.&#x20;

### Enhancements&#x20;

#### Report Enhancements&#x20;

* Corrected width size mismatch in the report layout.&#x20;
* Removed the test case name column from the report summary, combining the test case name and test case number into a single column.&#x20;

### Commons Cleanup&#x20;

* Removed unnecessary folders, files, and unused URLs.&#x20;
* Cleaned up unused configuration properties.&#x20;
* Moved component-specific code into respective test rig modules.&#x20;

#### Enhancing YAML Loading and Test Efficiency&#x20;

* Ordered YAML Data: Ensured that YAML data maintains its original order by using LinkedHashMap when loading YAML files.&#x20;
* Consistent Test Filtering: Fixed an issue where smoke test results appeared in a random order, ensuring consistent ordering.&#x20;
* Efficient Test Case Storage: Switched from a slower test case storage method to an optimized ArrayList implementation.&#x20;

#### Auto-Generated ID Handling&#x20;

* Updated logic to write auto-generated IDs directly into a global map instead of storing them in a file.&#x20;
* Enhanced the writeAutoGeneratedId method to handle responses without the keyword responses.&#x20;

#### Security Fixes&#x20;

* Set the log level for classes printing secrets in logs to prevent accidental exposure of sensitive information.&#x20;

#### ![Shape](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAANSURBVBhXY2BgYGAAAAAFAAGKM+MAAAAAAElFTkSuQmCC) Configuration Updates&#x20;

* Added new configuration properties in kernel.properties:&#x20;
* pms\_db\_schema=pms&#x20;
* expirationTime=120 (value in seconds)&#x20;

#### Dependency Updates & Fixes&#x20;

* Upgraded multiple dependencies to fix dependent bot issues.&#x20;

#### Logic Introduced for Adding Expiry Time to Transaction&#x20;

* The expiry time is now determined based on the expirationTime value provided in the configuration property.&#x20;
* Expiry timestamps are generated in UTC format.&#x20;
* The default expiration is set to 2 minutes, configurable through the config property.&#x20;
* During test execution, the expiry time is dynamically inserted into API requests using the keyword `$EXPIRYTIMESTAMP$`.&#x20;

### Bug Fixes&#x20;

* Updated OTP fetching logic to remove the pre-plus sign (+) from phone numbers when retrieving OTP from the OTP listener.&#x20;
* Set serverErrorsToMonitor default value as empty to avoid conflicts across different modules.&#x20;
* Introduced moduleNamePattern in kernel.properties, centralizing the module name property for easy retrieval across all modules.&#x20;

### Conclusion&#x20;

The v1.3.2 release of API Test Commons brings crucial updates to enhance the API testing framework’s functionality, security, and performance. By introducing improved YAML handling, auto-generated ID management, transaction expiry logic, and security improvements, this release ensures a more robust and efficient testing experience for MOSIP Functional Tests.&#x20;

### Pre-requisites &#x20;

Ensure the following software is installed on the machine from where the automation tests will be executed: &#x20;

* Java 21 &#x20;
* Maven 3.9.6 or higher &#x20;
* Lombok (Refer to[ Lombok Project](https://projectlombok.org/download)) &#x20;

#### For Windows &#x20;

* Git Bash 2.18.0 or higher &#x20;
* settings.xml needs to be present in the .m2 folder. &#x20;

#### For Linux &#x20;

* settings.xml file needs to be present in two places: &#x20;
* Regular Maven conf folder &#x20;
* Copy the same settings.xml under /usr/local/maven/conf &#x20;

### Access Test Automation Code &#x20;

#### 1. From Browser &#x20;

1. Clone or download the repository as a zip file from[ GitHub](https://github.com/mosip/mosip-functional-tests). &#x20;
2. Unzip the contents. &#x20;
3. Continue with the steps below from a terminal (Linux) or command prompt (Windows). &#x20;

#### 2. From Git Bash &#x20;

1. Copy the git link: \
   [https://github.com/mosip/mosip-functional-tests](https://github.com/mosip/mosip-functional-tests) &#x20;
2. On your local system, open Git Bash at any location. &#x20;
3. Run the following command: \
   git clone [https://github.com/mosip/mosip-functional-tests](https://github.com/mosip/mosip-functional-tests) &#x20;

### Build Test Automation Code &#x20;

1. Navigate to the `apitest-commons` directory:&#x20;

```sh
cd ../apitest-commons  
```

1. Build the project:&#x20;

```sh
mvn clean install -Dgpg.skip=true -Dmaven.gitcommitid.skip=true   
```

Ensure all prerequisites are met before running the updated tests. Refer to the updated README file for detailed setup and execution instructions.&#x20;

For any issues or further assistance, please open an issue on [GitHub](https://github.com/mosip/mosip-functional-tests/tree/master/apitest-commons).&#x20;
